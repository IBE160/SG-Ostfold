sprint:
  id: 1
  name: "Project Foundation & Core Reporting Slice"
  duration: "2 weeks"
  start_date: ""
  end_date: ""
  goal: "Deliver a secure, working foundation with a configured Next.js project, Supabase database schema, and Vercel CI/CD pipeline. Implement user authentication with role-based access for Shift Leaders and Managers. Deliver the core 'Create Shift Report' feature for Shift Leaders."
  status: "planned"

stories:
  - id: "1.1"
    title: "Project Foundation & CI/CD"
    epic_id: 1
    status: "planned"
    estimate: "M"
    acceptance_criteria:
      - "Next.js application is created with all specified dependencies (Supabase, TailwindCSS, ShadCN/UI)."
      - "The Supabase project is configured with the initial database schema for users, roles, and reports with RLS enabled."
      - "A Vercel project is configured to automatically deploy the `main` branch to production."

  - id: "1.2"
    title: "User Authentication & Role-Based Access"
    epic_id: 1
    status: "planned"
    estimate: "M"
    acceptance_criteria:
      - "User can log in with email/password via Supabase Auth."
      - "A 'Shift Leader' is redirected to their personal report dashboard after login."
      - "A 'Manager' is redirected to the main operations dashboard after login."
      - "Application routes are protected based on user role."

  - id: "1.3"
    title: "Create & Submit Shift Report"
    epic_id: 1
    status: "planned"
    estimate: "L"
    acceptance_criteria:
      - "A logged-in Shift Leader can access a form at the '/reports/new' route."
      - "The form includes all MVP fields and provides real-time client-side validation."
      - "On submission, the report data is saved to the 'reports' table in Supabase via a secure API route."
      - "A success notification is displayed upon successful submission."

tasks:
  # Tasks for Story 1.1
  - id: "T1.1.1"
    story_id: "1.1"
    title: "DevOps: Initialize Next.js project using the command from architecture.md"
    status: "todo"
  - id: "T1.1.2"
    story_id: "1.1"
    title: "Backend: Create initial Supabase DB schema for `users`, `roles`, and `reports` tables."
    status: "todo"
  - id: "T1.1.3"
    story_id: "1.1"
    title: "Backend: Implement initial Row Level Security (RLS) policies for the schema."
    status: "todo"
  - id: "T1.1.4"
    story_id: "1.1"
    title: "DevOps: Set up Vercel project and connect to the Git repository for CI/CD."
    status: "todo"
  - id: "T1.1.5"
    story_id: "1.1"
    title: "Testing: Configure environment variables for Supabase in Vercel and locally (.env.local)."
    status: "todo"
  - id: "T1.1.6"
    story_id: "1.1"
    title: "Frontend: Create basic application layout component as defined in architecture.md."
    status: "todo"

  # Tasks for Story 1.2
  - id: "T1.2.1"
    story_id: "1.2"
    title: "Backend: Configure Supabase Auth with email/password provider."
    status: "todo"
  - id: "T1.2.2"
    story_id: "1.2"
    title: "Frontend: Create login page UI component at '/login'."
    status: "todo"
  - id: "T1.2.3"
    story_id: "1.2"
    title: "Frontend: Implement client-side logic for handling login form submission and errors."
    status: "todo"
  - id: "T1.2.4"
    story_id: "1.2"
    title: "Backend: Create middleware to protect routes and handle redirects based on user roles ('shift_leader', 'manager')."
    status: "todo"
  - id: "T1.2.5"
    story_id: "1.2"
    title: "Frontend: Create placeholder dashboard pages for Shift Leader and Manager roles to handle redirects."
    status: "todo"
  - id: "T1.2.6"
    story_id: "1.2"
    title: "Testing: Write integration test for the login flow and role-based redirection."
    status: "todo"

  # Tasks for Story 1.3
  - id: "T1.3.1"
    story_id: "1.3"
    title: "Frontend: Create the 'New Shift Report' form page and components using ShadCN/UI."
    status: "todo"
  - id: "T1.3.2"
    story_id: "1.3"
    title: "Frontend: Implement client-side form validation logic (e.g., using Zod and React Hook Form)."
    status: "todo"
  - id: "T1.3.3"
    story_id: "1.3"
    title: "Backend: Create a Next.js API Route Handler (e.g., POST /api/reports) to receive report data."
    status: "todo"
  - id: "T1.3.4"
    story_id: "1.3"
    title: "Backend: Implement server-side validation for the incoming report data in the API route."
    status: "todo"
  - id: "T1.3.5"
    story_id: "1.3"
    title: "Backend: Write the Supabase client logic to insert the validated data into the `reports` table."
    status: "todo"
  - id: "T1.3.6"
    story_id: "1.3"
    title: "Frontend: Implement success/error notifications (toasts) for the form submission."
    status: "todo"
  - id: "T1.3.7"
    story_id: "1.3"
    title: "Testing: Write a unit test for the form's validation logic."
    status: "todo"
